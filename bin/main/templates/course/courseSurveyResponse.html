<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="https://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="icon" href="favicon.ico" />
<title>Course Survey</title>
<link
	href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
	crossorigin="anonymous" />

</head>
<body style="background-color: #e7ebee">
	<div class="container">
		<div sec:authorize="!isAuthenticated()">
			<p>You have not logged in to the application. Please login to
				continue...</p>
			<a th:href="@{/login}">Click here to log in!</a>
		</div>

		<div sec:authorize="isAuthenticated()">
			<h3>
				Survey for course : <label th:text="${courseName}"></label>

			</h3>
			<form action="#" id="createQuestionForm"
				th:action="@{/courseSurveyResponse}" method="post" role="form"
				data-toggle="validator">
				<table class="table table-bordered">
					<tbody>
						
						<tr th:each="question, iter : ${surveyQuestions}">
							<td><label th:text="${iter.index} + ${1}"></label><label>.
							</label> <label th:text="${question.title}"></label> 
							<input type="hidden"
								th:id="${courseId}" th:name="|CourseId|" name="response"
								placeholder="Enter your response here" class="form-control" th:value="${courseId}"/>
								<div th:if="${question !=null && question.type == 1}">
									<div class="form-group input-group has-feedback"
										style="width: 100%;">
										<label for="response" th:text="${question.text}"></label> <input
											th:id="${iter.index+1}"
											th:name="|${iter.index+1}_${question.id}|" type="number"
											name="response" placeholder="Enter your response here"
											class="form-control" required /> <span
											class="form-control-feedback" aria-hidden="true"></span>
									</div>
								</div>
								<div class="table-responsive"
									th:if="${question !=null && question.type == 2}">
									<label th:text="${question.text}"></label>
									<table class="table table-bordered">
										<tbody>
											<tr th:each="data, iterinner : ${question.choices}">
												<td>
													<div class="radio">
														<label> <input type="radio" name="option"
															th:id="|td${iterinner.index}|"
															th:name="|${iter.index+1}_${question.id}_${data.value}_${data.text}|" />
														</label> <span th:text="${data.text}"></span>
													</div>
												</td>
											</tr>
										</tbody>
									</table>
								</div>
								<div th:if="${question !=null && question.type == 3}">

									<div class="table-responsive">
										<label th:text="${question.text}"></label>
										<table class="table table-bordered">
											<tbody>
												<tr th:each="data, iterinner : ${question.choices}">
													<td>
														<div class="checkbox">
															<label> <input type="checkbox" name="option"
																th:id="|td${iterinner.index}|"
																th:name="|${iter.index+1}_${question.id}_${data.value}_${data.text}|" />
															</label> <span th:text="${data.text}"></span>
														</div>
													</td>
												</tr>
											</tbody>
										</table>
									</div>
								</div>
								<div th:if="${question !=null && question.type == 4}">
									<div class="form-group input-group has-feedback"
										style="width: 100%;">
										<label th:text="${question.text}"></label>
										<textarea name="response" id="response" rows="4"
											placeholder="Enter your response here" class="form-control"
											required th:name="|${iter.index+1}_${question.id}|"></textarea>
										<span class="form-control-feedback" aria-hidden="true"></span>
									</div>
								</div> <br /> </td>
						</tr>
					</tbody>
				</table>

				<div class="text-center">
					<a th:href="@{/courseList}" class="btn btn-primary btn-md">
						Back</a> &nbsp;&nbsp;&nbsp;&nbsp;
					<button type="submit" class="btn btn-primary btn-md">Complete</button>
					<br /> 
					<br /> 
				</div>
			</form>

		</div>
	</div>
</body>
</html>